## 如何使用Vue创建一个表单组件

### 参数模型



### 表单校验



### 参数回填



### 深层组件传参和解耦

## Vue中如何实现高效的虚拟列表

1. views记录在视图中的view，unusedViews记录在视图中没有使用的view。滚动的时候判断是否有复用的view，即判断这个view的index是不是在startIndex和endIndex之间，如果在，说明这个view是可以复用的。如果不在这个范围，则将这个view从views中移除，加入unusedViews中，方便复用。从startIndex到endIndex开始遍历item，item是否已经在视图中，如果存在，则更新item即可。如果不存在，则需要将放入unusedView中的view逐个取出并更新item和index，放入views中，最后通过index排序保证顺序。
2. 使用transform3d改为元素的位置，提高渲染效率。
3. 滚动的回调函数使用requestAnimation实现节流效果，每一次屏幕刷新就触发滚动，增强了流畅性。
4. 动态高度的解决方案，根据节点的高度生成一个高度数组，记录每一个节点所在的高度。滚动到一个位置时，通过二分查找去高度数组找到与滚动位置的起始位置相等的高度，再通过高度数组遍历到结束位置的高度，则得到需要展示元素的起始index和终止index。
   

## FancySelect中代码优化点

1. 对树形数据做一次递归遍历，生成规范化的数据，如子节点的key。同时在遍历的过程中，为每个节点添加祖先节点，这样就避免了使用while循环去遍历每一个节点的祖先节点。
2. 为了计算每一个节点有多少的子节点，后代节点，为每一个节点 定义了count属性，在规范化数据的过程中同时记录了每一个节点的子节点和后代节点数量。
3. 在搜索时，需要更新每个节点的子节点和后代节点匹配关键词的数量，如果匹配到后代节点匹配到了关键词则父节点默认展开。通过深度优先遍历的算法在优先遍历子节点，根据子节点的是否匹配到关键词改变父节点的状态。如果从父到子递归，为了保证父节点能展开，对每一个匹配到的节点需要遍历所有的祖先节点改变其展开状态，这样显然是低效的。

4. 将节点的选中状态(三种状态)用一个map存储，根据是否选中用一个selectedMap存储，方便获取改变节点的状态，而不是遍历数组。
5. 使用provide,inject将祖先组件传入后代组件中，后代组件可以直接获取祖先组件的数据，解决了兄弟组件，父子组件，祖先组件的通信。